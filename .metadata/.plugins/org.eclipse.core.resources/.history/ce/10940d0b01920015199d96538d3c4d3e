package controleur;

import java.awt.Point;
import java.util.*;

import modele.DemandeDeLivraison;
import modele.Intersection;
import modele.Itineraire;
import modele.Plan;
import modele.Tournee;
import modele.Troncon;

import vue.FenetreIHM;

/**
 * 
 */
public class Controleur {

	public static final EtatInit etatInit = new EtatInit();
	public static final EtatPlanCharge etatPlanCharge = new EtatPlanCharge();
	public static final EtatLivraisonChargee etatLivraisonChargee = new EtatLivraisonChargee();
	
	/**
	 * Change l'etat courant du controleur
	 * @param etat le nouvel etat courant
	 */
	protected static void setEtatCourant(Etat etat){
		etatCourant = etat;
	}
	
    /**
     * 
     */
    protected static Etat etatCourant;

    /**
     * 
     */
    protected ListeCommande listeCommandes;

    /**
     * 
     */
    protected FenetreIHM fenetre;

    /**
     * 
     */
    protected Plan plan;

    /**
     * 
     */
    protected DemandeDeLivraison demandeDeLivraison;

    /**
     * 
     */
    
    // A ENLEVER
    protected Tournee tournee;
    // FIN A ENLEVER
    /**
     * Default constructor
     */
    public Controleur() {
    	this.plan = new Plan();
    	
    	this.tournee = new Tournee();
    	
    	this.demandeDeLivraison = new DemandeDeLivraison(this.tournee);
    	
    	etatCourant = etatInit;
    	
    	fenetre = new FenetreIHM(tournee, this, plan);
    }
    

    
    protected void undo() {
        // TODO implement here
    }

    /**
     * 
     */
    protected void redo() {
        // TODO implement here
    }


    /**
     * 
     */
    public void importerLivraison() {
        this.etatCourant.importerLivraison(fenetre,demandeDeLivraison,plan);
    }

    /**
     * 
     */
    public void calculerTournee() {
        // TODO implement here
    }

    /**
     * 
     */
    protected void ajouterLivraison() {
        // TODO implement here
    }

    /**
     * 
     */
    protected void genererFeuilleRoute() {
        // TODO implement here
    }

    /**
     * 
     */
    protected void modifierLivraison() {
        // TODO implement here
    }

    /**
     * 
     */
    protected void supprimeLivraison() {
        // TODO implement here
    }

    /**
     * 
     */
    public void clicGauche(Point p) {
        this.etatCourant.clicGauche(fenetre,plan,p);
    }

	public int getPlanLargeur() {
		return this.plan.getLargeur();
	}

	public int getPlanHauteur() {
		return this.plan.getHauteur();
	}



	public void newFakeTournee() {
	    this.tournee.changementEffectue();
	}



	public void ouvrirPlan() {
		this.etatCourant.ouvrirPlan(this.plan);	
		this.plan.changementEffectue();
	}



	public void clicDroit(Point p) {
		this.etatCourant.clicDroit(fenetre,p);		
	}

}