package modele;

import java.awt.Point;
import java.io.IOException;
import java.util.*;

import javax.xml.parsers.ParserConfigurationException;

import org.xml.sax.SAXException;

import xml.DeserialiseurPlanXML;
import xml.ExceptionXML;

/**
 * 
 */
public class Plan {


    public Plan(Set<Intersection> listeInter) {
		this.intersections = listeInter;
	}
    
    /**
     * @param fichier
     */
    public Plan() {
    	try {
    		intersections = new HashSet<Intersection>();
    		DeserialiseurPlanXML.charger(this);
		} catch (ParserConfigurationException | SAXException | IOException
				| ExceptionXML e) {
			// TODO Auto-generated catch block
			System.out.println("Exception constructeur plan");			
			System.out.println(e.getMessage());
			e.printStackTrace();
		}
    }
    
    
    public Set<Intersection> getIntersections(){
    	return this.intersections;
    }

    public int getLargeur(){
    	int max = 0;
    	for(Intersection inter : this.intersections){
    		if(inter.getX() > max){
    			max = inter.getX();
    		}
    	}
    	return max;
    }
    
    public int getHauteur(){
    	int max = 0;
    	for(Intersection inter : this.intersections){
    		if(inter.getY() > max){
    			max = inter.getY();
    		}
    	}
    	return max;
    }
    
    public Intersection cherche(Point p, int echelleX, int echelleY){
    	Iterator<Intersection> it = intersections.iterator();
		while (it.hasNext()){
			Intersection inter = it.next();
			System.out.println(inter);
			if (inter.contient(p,echelleX,echelleY)) return inter;
		}
		return null;
    }
    
    /**
     * 
     */
    protected Set<Intersection> intersections;

    /**
     * 
     */
    protected Plan singleton;

    /**
     * @param fichier
     */
    public void Plan(String fichier) {
        // TODO implement here
    }

}